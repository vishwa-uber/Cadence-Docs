<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">12 posts tagged with &quot;Deep Dives&quot; | Cadence</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cadenceworkflow.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" name="twitter:image" content="https://cadenceworkflow.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" property="og:url" content="https://cadenceworkflow.io/Cadence-Docs/blog/tags/deep-dives"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="12 posts tagged with &quot;Deep Dives&quot; | Cadence"><meta data-rh="true" name="description" content="Deep Dives tag description"><meta data-rh="true" property="og:description" content="Deep Dives tag description"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/Cadence-Docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cadenceworkflow.io/Cadence-Docs/blog/tags/deep-dives"><link data-rh="true" rel="alternate" href="https://cadenceworkflow.io/Cadence-Docs/blog/tags/deep-dives" hreflang="en"><link data-rh="true" rel="alternate" href="https://cadenceworkflow.io/Cadence-Docs/blog/tags/deep-dives" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J7SVDVT89Z-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/Cadence-Docs/blog/rss.xml" title="Cadence RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cadence-Docs/blog/atom.xml" title="Cadence Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W63QD8QE6E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W63QD8QE6E",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=G-W63QD8QE6E",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Cadence" href="/Cadence-Docs/opensearch.xml">



<link rel="preload" href="https://d1a3f4spazzrp4.cloudfront.net/dotcom-assets/fonts/UberMove-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://d1a3f4spazzrp4.cloudfront.net/dotcom-assets/fonts/UberMoveText-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://d1a3f4spazzrp4.cloudfront.net/dotcom-assets/fonts/UberMoveText-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://d1a3f4spazzrp4.cloudfront.net/dotcom-assets/fonts/UberMoveText-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="stylesheet" href="/Cadence-Docs/assets/css/styles.21d24fda.css">
<script src="/Cadence-Docs/assets/js/runtime~main.d6df3fc6.js" defer="defer"></script>
<script src="/Cadence-Docs/assets/js/main.d6a12cbd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-W63QD8QE6E" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cadence-Docs/"><div class="navbar__logo"><img src="/Cadence-Docs/img/cadence-logo.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="82"><img src="/Cadence-Docs/img/logo-white.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="82"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Cadence-Docs/docs/get-started">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Cadence-Docs/blog">Blog</a><a class="navbar__item navbar__link" href="/Cadence-Docs/community/support">Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Repositories</a><ul class="dropdown__menu"><li><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Service<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-go-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Client<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Client<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Samples<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Samples<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-web" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Web<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-idl" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence IDLs<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-charts" target="_blank" rel="noopener noreferrer" class="dropdown__link">Helm Charts<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/10/12/2025-10-12-controlling-workflows-from-web/controlling-workflows-from-web">Controlling Workflows From Web</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/10/06/cadence-joins-cncf-cloud-native-computing-foundation">Cadence Joins CNCF (Cloud Native Computing Foundation)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/09/25/introducing-batch-future-faster-activity-execution">Introducing Batch Future with Concurrency Control</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/08/06/workflow-diagnostics">Workflow Diagnostics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/07/01/2025-07-01-safe-deployment-of-versioned-workflows/safe-deployment-of-versioned-workflows">Safe deployments of Versioned workflows</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/06/30/adaptive-tasklist-scaler">Adaptive Tasklist Scaler</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2025/04/11/2025-04-11-announcing-cadence-web-v4/announcing-cadence-web-v4">Introducing cadence-web v4.0.0</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/11/18/cadence-workflows-github-organization">Cadence Repositories Have Moved!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/zonal-isolation-v1/zonal-isolation-v1">Zonal Isolation for Cadence Workflows</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/10/01/announcing-cadence-helm-charts-v0">Announcement: Cadence Helm Charts v0 Release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/09/05/workflow-specific-rate-limits">Minimizing blast radius in Cadence: Introducing Workflow ID-based Rate Limits</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/07/11/2024-07-11-yearly-roadmap-update/yearly-roadmap-update">2024 Cadence Yearly Roadmap Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/02/15/cadence-non-deterministic-common-qa">Cadence non-derministic errors common question Q&amp;A (part 1)</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/11/30/community-spotlight-update-november-2023">Cadence Community Spotlight Update - November 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/08/31/community-spotlight-august-2023">Cadence Community Spotlight Update - August 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/08/28/nondeterministic-errors-replayers-shadowers">Non-deterministic errors, replayers and shadowers</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/07/31/community-spotlight-july-2023">Cadence Community Spotlight Update - July 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/07/16/2023-07-16-write-your-first-workflow-with-cadence/write-your-first-workflow-with-cadence">Write your first workflow with Cadence</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/07/10/cadence-bad-practices-part-1">Bad practices and Anti-patterns with Cadence (Part 1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/07/05/implement-cadence-worker-from-scratch">Implement a Cadence worker service from scratch</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/06/28/components-of-cadence-application-setup">Understanding components of Cadence application</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/06/30/community-spotlight-june-2023">Cadence Community Spotlight Update - June 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/06/08/2023-06-08-survey-results/survey-results">2023 Cadence Community Survey Results</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/03/31/community-spotlight-march-2023">Cadence Community Spotlight Update - March 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2024/3/11/community-spotlight-update-march-2024">Cadence Community Spotlight Update - March 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/02/28/community-spotlight-february">Cadence Community Spotlight Update - February 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2023/01/31/community-spotlight-january-2023">Cadence Community Spotlight Update - January 2023</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/12/23/community-spotlight-december-2022">Cadence Community Spotlight Update - December 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/11/30/community-spotlight-november-2022">Cadence Community Spotlight Update - November 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/10/31/community-spotlight-october-2022">Cadence Community Spotlight Update - October 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/09/30/community-spotlight-september-2022">Cadence Community Spotlight Update - September 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/08/31/community-spotlight-august-2022">Cadence Community Spotlight Update - August 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/07/31/community-spotlight-update-july-2022">Cadence Community Spotlight Update - July 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/06/30/community-spotlight-update-june-2022">Cadence Community Spotlight Update - June 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/05/31/community-spotlight-update-may-2022">Cadence Community Spotlight Update - May 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/04/30/community-spotlight-update-april-2022">Cadence Community Spotlight Update - April 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/03/31/community-spotlight-update-march-2022">Cadence Community Spotlight Update - March 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/02/28/community-spotlight-february-2022">Cadence Community Spotlight Update - February 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2022/01/31/community-spotlight-january-2022">Cadence Community Spotlight Update - January 2022</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2021/10/19/2021-10-19-moving-to-grpc/moving-to-grpc">Moving to gRPC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2021/10/13/announcing-cadence-oss-office-hours-and-community-sync-up">Announcing Cadence OSS office hours and community sync up</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cadence-Docs/blog/2021/09/30/long-term-commitment-and-support-for-the-cadence-project-and-its-community">Long-term commitment and support for the Cadence project, and its community</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>12 posts tagged with &quot;Deep Dives&quot;</h1><p>Deep Dives tag description</p><a href="/Cadence-Docs/blog/tags">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2025/07/01/2025-07-01-safe-deployment-of-versioned-workflows/safe-deployment-of-versioned-workflows">Safe deployments of Versioned workflows</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-07-10T16:00:00.000Z">July 10, 2025</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/arzonus"><img class="avatar__photo authorImage_XqGP" src="https://github.com/arzonus.png" alt="Seva Kaloshin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/arzonus"><span class="authorName_yefp" translate="no">Seva Kaloshin</span></a></div><small class="authorTitle_nd0D" title="Software Engineer II @ Uber">Software Engineer II @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/seva-kaloshin/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/arzonus" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>At Uber, we manage billions of workflows with lifetimes ranging from seconds to years. Over the course of their lifetime, workflow code logic often requires changes. To prevent non-deterministic errors that changes may cause, Cadence offers <a href="https://cadenceworkflow.io/docs/go-client/workflow-versioning" target="_blank" rel="noopener noreferrer">a Versioning feature</a>. However, the feature&#x27;s usage is limited because changes are only backward-compatible, but not forward-compatible. This makes potential rollbacks or workflow execution rescheduling unsafe.</p>
<p>To address these issues, we have made recent enhancements to <a href="https://cadenceworkflow.io/docs/go-client/workflow-versioning" target="_blank" rel="noopener noreferrer">the Versioning API</a>, enabling the safe deployment of versioned workflows by separating code changes from the activation of new logic.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-versioned-workflow">What is a Versioned Workflow?<a href="#what-is-a-versioned-workflow" class="hash-link" aria-label="Direct link to What is a Versioned Workflow?" title="Direct link to What is a Versioned Workflow?" translate="no">​</a></h2>
<p>Cadence reconstructs a workflow&#x27;s execution history by replaying past events against your workflow code, expecting the exact same outcome every time. If your workflow code changes in an incompatible way, this replaying process can lead to non-deterministic errors.</p>
<p>A versioned workflow uses a <a href="https://cadenceworkflow.io/docs/go-client/workflow-versioning" target="_blank" rel="noopener noreferrer">Versioning feature</a> to help you avoid errors. This allows developers to safely update their workflow code without breaking existing executions. The key is the <code>workflow.GetVersion</code> function (available in <a href="https://cadenceworkflow.io/docs/go-client/workflow-versioning" target="_blank" rel="noopener noreferrer">Go</a> and <a href="https://cadenceworkflow.io/docs/java-client/versioning" target="_blank" rel="noopener noreferrer">Java</a>). By using <code>workflow.GetVersion</code>, you can mark points in your code where changes occur, ensuring that future calls will return a specific version number.</p>
<p>Before the rollout, only instances of workflow code <strong>v0.1</strong> existed:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">v </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;change-id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ActivityA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">result1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ActivityC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">result1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-flow">Deployment flow<a href="#deployment-flow" class="hash-link" aria-label="Direct link to Deployment flow" title="Direct link to Deployment flow" translate="no">​</a></h3>
<p>Let’s consider an example deployment of a change from workflow code <strong>v0.1</strong>, where only <code>FooActivity</code> is supported.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.1 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FooActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>to workflow code <strong>v0.2</strong>, which introduces a new <code>BarActivity</code> and utilizes the Versioning feature:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.2 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	version </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyChange&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FooActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> BarActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Before the rollout, only instances of workflow code <strong>v0.1</strong> existed:</p>
<p><img decoding="async" loading="lazy" alt="old-deployment-flow-v0.1.png" src="/Cadence-Docs/assets/images/old-deployment-flow-v0.1-6d8342765e8cb8e3ecd314b6cd0a9ce6.png" width="1424" height="458" class="img_ev3q"></p>
<p>Rollouts are typically performed gradually, with new workers replacing previous worker instances one at a time. This means that multiple workers with workflow code <strong>v0.1</strong> and <strong>v0.2</strong> can exist simultaneously. When a worker is replaced, a running workflow execution is rescheduled to another worker. Thanks to the Versioning feature, a worker with workflow code <strong>v0.2</strong> can support a workflow execution started by a worker with workflow code <strong>v0.1</strong>.</p>
<p><img decoding="async" loading="lazy" alt="old-deployment-flow-v0.1-v0.2.png" src="/Cadence-Docs/assets/images/old-deployment-flow-v0.1-v0.2-b827128819beaa983d6989ad59533858.png" width="1407" height="463" class="img_ev3q">
During rollouts, the service should continue to serve production traffic, allowing new workflows to be initiated. If a new worker processes a &quot;Start Workflow Execution&quot; request, it will execute a workflow based on the new version. However, if an old worker handles the request, it will start a workflow based on the old version.</p>
<p><img decoding="async" loading="lazy" alt="old-deployment-flow-v0.1-v0.2-start-workflow.png" src="/Cadence-Docs/assets/images/old-deployment-flow-v0.1-v0.2-start-workflow-73fd97917cc2729a1a3fe6a9cecc3fc5.png" width="1408" height="653" class="img_ev3q"></p>
<p>If a rollout is completed successfully, both the new and old workflows will continue to execute simultaneously.
<img decoding="async" loading="lazy" alt="old-deployment-flow-v0.2.png" src="/Cadence-Docs/assets/images/old-deployment-flow-v0.2-a8e914f62890fd34b7747dc57c81d5c3.png" width="1413" height="475" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="versioned-workflow-rescheduling-problem">Versioned Workflow Rescheduling Problem<a href="#versioned-workflow-rescheduling-problem" class="hash-link" aria-label="Direct link to Versioned Workflow Rescheduling Problem" title="Direct link to Versioned Workflow Rescheduling Problem" translate="no">​</a></h2>
<p>Workflows typically execute on the same worker on which they started. However, various factors can necessitate rescheduling with a different worker.:</p>
<ul>
<li><strong>Worker Shutdown</strong>: Occurs when a worker is shut down due to reasons such as rollouts, rollbacks, restarts, or instance crashes.</li>
<li><strong>Worker Unavailability</strong>: Occurs when a worker is running but loses connection to the server, becoming unavailable.</li>
<li><strong>High Traffic Load</strong>: Occurs when a worker&#x27;s sticky cache is fully utilized, preventing further workflow execution and causing the server to reschedule the workflow to another worker.</li>
</ul>
<p>During a rollout or rollback, workflow rescheduling for workflow executions with new versions becomes unsafe, especially during rollbacks:
<img decoding="async" loading="lazy" alt="workflow-rescheduling-problem.png" src="/Cadence-Docs/assets/images/workflow-rescheduling-problem-5fd5b5c41c9c2c408bff76d54043fe95.png" width="1425" height="1077" class="img_ev3q"></p>
<ul>
<li>If an old workflow is rescheduled to either an old or a new worker, it generally processes correctly.</li>
<li>If a new workflow is rescheduled to an old worker, it will be blocked or even fail (depending on <code>NonDeterministicWorkflowPolicy</code>).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-did-it-happen">Why did it happen?<a href="#why-did-it-happen" class="hash-link" aria-label="Direct link to Why did it happen?" title="Direct link to Why did it happen?" translate="no">​</a></h3>
<p>The old worker doesn&#x27;t support the new version and cannot replay its history correctly, which leads to a non-deterministic error. The Versioning API allowed customers to make only backward-compatible changes to workflow code definitions; however, these changes were not forward-compatible.</p>
<p>At the same time, there were no workarounds allowing customers to make these changes forward-compatible, so they couldn&#x27;t separate code changes from the activation of the new version.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-impact-did-we-have-at-uber">What impact did we have at Uber?<a href="#what-impact-did-we-have-at-uber" class="hash-link" aria-label="Direct link to What impact did we have at Uber?" title="Direct link to What impact did we have at Uber?" translate="no">​</a></h3>
<p>Depending on the workflow code, code changes, and impact, to eliminate the negative impact of a rollback, a Cadence customer needed to identify all problematic workflows, terminate them if they did not fail automatically, and restart them. These steps resulted in a significant on-call burden, leading to possible SLO violations and incidents.</p>
<p>Based on customer impact, we introduced changes in the Versioning API, enabling customers to separate code changes from the activation of the new version.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="executewithversion-and-executewithminversion">ExecuteWithVersion and ExecuteWithMinVersion<a href="#executewithversion-and-executewithminversion" class="hash-link" aria-label="Direct link to ExecuteWithVersion and ExecuteWithMinVersion" title="Direct link to ExecuteWithVersion and ExecuteWithMinVersion" translate="no">​</a></h2>
<p>The recent release of the Go SDK (Java soon) has extended the GetVersion function and introduced two new options:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// When it&#x27;s executed for the first time, it returns 2, instead of 10 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;changeId&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteWithVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// When it&#x27;s executed for the first time, it returns 1, instead of 10 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;changeId&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteWithMinVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>These two new options enable customers to choose which version should be returned when <code>GetVersion</code> is executed for the first time, instead of the maximum supported version.</p>
<ul>
<li><code>ExecuteWithVersion</code> returns a specified value.</li>
<li><code>ExecuteWithMinVersion</code> returns a minimal supported version.</li>
</ul>
<p>Let’s extend the example above and consider the deployment of versioned workflows with new functions:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-of-versioned-workflows">Deployment of Versioned workflows<a href="#deployment-of-versioned-workflows" class="hash-link" aria-label="Direct link to Deployment of Versioned workflows" title="Direct link to Deployment of Versioned workflows" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-0">Step 0<a href="#step-0" class="hash-link" aria-label="Direct link to Step 0" title="Direct link to Step 0" translate="no">​</a></h4>
<p>The initial version remains <strong>v0.1</strong></p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.1 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MyWorkflow supports: workflow.DefaultVersion </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FooActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>When a <code>StartWorkflowExecution</code> request is processed, a new workflow execution will have a <code>DefaultVersion</code> of the upcoming change ID.</p>
<p><img decoding="async" loading="lazy" alt="new-deployment-flow-step-0.png" src="/Cadence-Docs/assets/images/new-deployment-flow-step-0-d99eeccb942d08db136e3b477ea9928e.png" width="1394" height="575" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1">Step 1<a href="#step-1" class="hash-link" aria-label="Direct link to Step 1" title="Direct link to Step 1" translate="no">​</a></h4>
<p><code>GetVersion</code> is still used; however, <code>workflow.ExecuteWithVersion</code> has also been added.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.2   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MyWorkflow supports: workflow.DefaultVersion and 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// When GetVersion is executed for the first time, workflow.DefaultVersion will be returned</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyChange&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteWithVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FooActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> BarActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Worker <strong>v0.2</strong> contains the new workflow code definition that supports the new logic. However, when a StartWorkflowExecution request is processed, a new workflow execution will still have the default version of the “MyChange” change ID.</p>
<p><img decoding="async" loading="lazy" alt="new-deployment-flow-step-1.png" src="/Cadence-Docs/assets/images/new-deployment-flow-step-1-a2459e69b387127c3c238046ce6465ce.png" width="1404" height="539" class="img_ev3q"></p>
<p>This change enables customers to easily roll back to worker <strong>v0.1</strong> without encountering any non-deterministic errors.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2">Step 2<a href="#step-2" class="hash-link" aria-label="Direct link to Step 2" title="Direct link to Step 2" translate="no">​</a></h4>
<p>Once all <strong>v0.2</strong> workers are replaced with <strong>v0.1</strong> workers, we can deploy a new worker that begins workflow executions with the new version.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.3   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MyWorkflow supports: workflow.DefaultVersion and 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// When GetVersion is executed for the first time, Version #1 will be returned </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyChange&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultVersion </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FooActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> BarActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Worker <strong>v0.3</strong> contains the new workflow code definition that supports the new logic while still supporting the previous logic. Therefore, when a StartWorkflowExecution request is processed, a new workflow execution will have Version #1 of the “MyChange” change ID.</p>
<p><img decoding="async" loading="lazy" alt="new-deployment-flow-step-2.png" src="/Cadence-Docs/assets/images/new-deployment-flow-step-2-ab5a51b76ed713d975c38232f5fb42aa.png" width="1415" height="555" class="img_ev3q"></p>
<p>This change enables customers to easily roll back to worker <strong>v0.2</strong> without any non-deterministic errors, as both worker versions support &quot;DefaultVersion&quot; and &quot;Version #1&quot; of the “MyChange” change ID.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3">Step 3<a href="#step-3" class="hash-link" aria-label="Direct link to Step 3" title="Direct link to Step 3" translate="no">​</a></h4>
<p>Once all workers <strong>v0.3</strong> replace the old worker <strong>v0.2</strong> and all workflows with the DefaultVersion of “MyChange” are <strong>finished</strong>, we can deploy a new worker that starts workflow executions with the new version and doesn’t support the previous logic.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Git tag: v0.4     </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MyWorkflow supports: 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// When GetVersion is executed for the first time, Version #1 will be returned </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyChange&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> BarActivity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Worker <strong>v0.4</strong> contains the new workflow code definition that supports the new logic but does not support the previous logic. Therefore, when a StartWorkflowExecution request is processed, a new workflow execution will have Version #1 of the “MyChange” change ID.</p>
<p><img decoding="async" loading="lazy" alt="new-deployment-flow-step-3.png" src="/Cadence-Docs/assets/images/new-deployment-flow-step-3-18b8d4d56479dc6f248d8ee926998807.png" width="1410" height="567" class="img_ev3q"></p>
<p>This change finalizes the safe rollout of the new versioned workflow. At each step, both versions of workers are fully compatible with one another, making rollouts and rollbacks safe.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="differences-with-the-previous-deployment-flow">Differences with the previous deployment flow<a href="#differences-with-the-previous-deployment-flow" class="hash-link" aria-label="Direct link to Differences with the previous deployment flow" title="Direct link to Differences with the previous deployment flow" translate="no">​</a></h4>
<p>The previous deployment flow for versioned workflows included only Steps 0, 2, and 3. Therefore, a direct upgrade from Step 0 to Step 2 (skipping Step 1) was not safe due to the inability to perform a safe rollback. The new functions enabled customers to have Step 1, thereby making the deployment process safe.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>The new options introduced into <code>GetVersion</code> address gaps in the Versioning logic that previously led to failed workflow executions. This enhancement improves the safety of deploying versioned workflows, allowing for the separation of code changes from the activation of new logic, making the deployment process more predictable. This extension of <code>GetVersion</code> is a significant improvement that opens the way for future optimizations.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Announcement tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/announcements">Announcement</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2025/06/30/adaptive-tasklist-scaler">Adaptive Tasklist Scaler</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-06-30T00:00:00.000Z">June 30, 2025</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/shaddoll"><img class="avatar__photo authorImage_XqGP" src="https://github.com/Shaddoll.png" alt="Zijian Chen"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/shaddoll"><span class="authorName_yefp" translate="no">Zijian Chen</span></a></div><small class="authorTitle_nd0D" title="Software Engineer @ Uber">Software Engineer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/zijian-chen-5868938b/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/Shaddoll" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>At Uber, we previously relied on a dynamic configuration service to manually control the number of partitions for scalable tasklists. This configuration approach introduced several operational challenges:</p>
<ul>
<li><strong>Error-prone:</strong> Manual updates and deployments were required.</li>
<li><strong>Unresponsive:</strong> Adjustments were typically reactive, often triggered by customer reports or observed backlogs.</li>
<li><strong>Irreversible:</strong> Once increased, the number of partitions was rarely decreased due to the complexity of the two-phase process, especially when anticipating future traffic spikes.</li>
</ul>
<p>To address these issues, we introduced a new component in the Cadence Matching service: <strong>Adaptive Tasklist Scaler</strong>. This component dynamically monitors tasklist traffic and adjusts partition counts automatically. Since its rollout, we&#x27;ve seen a significant reduction in incidents and operational overhead caused by misconfigured tasklists.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-scalable-tasklist">What is a Scalable Tasklist?<a href="#what-is-a-scalable-tasklist" class="hash-link" aria-label="Direct link to What is a Scalable Tasklist?" title="Direct link to What is a Scalable Tasklist?" translate="no">​</a></h2>
<p>A <strong>scalable tasklist</strong> is one that supports multiple partitions. Since Cadence’s Matching service is sharded by tasklist, all requests to a specific tasklist are routed to a single Matching host. To avoid bottlenecks and enhance scalability, tasklists can be partitioned so that multiple Matching hosts handle traffic concurrently.</p>
<p>These partitions are transparent to clients. When a request arrives at the Cadence server for a scalable tasklist, the server selects an appropriate partition. More details can be found in <a href="https://github.com/cadence-workflow/cadence/blob/v1.3.1/docs/scalable_tasklist.md" target="_blank" rel="noopener noreferrer">this document</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-is-the-number-of-partitions-manually-configured">How Is the Number of Partitions Manually Configured?<a href="#how-is-the-number-of-partitions-manually-configured" class="hash-link" aria-label="Direct link to How Is the Number of Partitions Manually Configured?" title="Direct link to How Is the Number of Partitions Manually Configured?" translate="no">​</a></h3>
<p>The number of partitions for a tasklist is controlled by two dynamic configuration properties:</p>
<ol>
<li><a href="https://github.com/cadence-workflow/cadence/blob/v1.2.13/common/dynamicconfig/constants.go#L3350" target="_blank" rel="noopener noreferrer"><code>matching.numTasklistReadPartitions</code></a>: Specifies the number of <strong>read</strong> partitions.</li>
<li><a href="https://github.com/cadence-workflow/cadence/blob/v1.2.13/common/dynamicconfig/constants.go#L3344" target="_blank" rel="noopener noreferrer"><code>matching.numTasklistWritePartitions</code></a>: Specifies the number of <strong>write</strong> partitions.</li>
</ol>
<p>To prevent misconfiguration, a guardrail is in place to ensure that the number of read partitions is <strong>never less than</strong> the number of write partitions.</p>
<p>When <strong>increasing</strong> the number of partitions, both properties are typically updated simultaneously. However, due to the guardrail, the order of updates doesn&#x27;t matter—read and write partitions can be increased in any sequence.</p>
<p>In contrast, <strong>decreasing</strong> the number of partitions is more complex and requires a <strong>two-phase process</strong>:</p>
<ol>
<li><strong>First</strong>, reduce the number of write partitions.</li>
<li><strong>Then</strong>, wait for any backlog in the decommissioned partitions to drain completely.</li>
<li><strong>Finally</strong>, reduce the number of read partitions.</li>
</ol>
<p>Because this process is tedious, error-prone, and backlog-sensitive, it is rarely performed in production environments.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-adaptive-tasklist-scaler-work">How Does Adaptive Tasklist Scaler Work?<a href="#how-does-adaptive-tasklist-scaler-work" class="hash-link" aria-label="Direct link to How Does Adaptive Tasklist Scaler Work?" title="Direct link to How Does Adaptive Tasklist Scaler Work?" translate="no">​</a></h2>
<p>The architecture of the adaptive tasklist scaler is shown below:</p>
<p><img decoding="async" loading="lazy" alt="adaptive tasklist scaler architecture" src="/Cadence-Docs/assets/images/architecture-0c083477bee0b8657dc4cea752dc34ba.png" width="1200" height="980" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-migrating-configuration-to-the-database">1. Migrating Configuration to the Database<a href="#1-migrating-configuration-to-the-database" class="hash-link" aria-label="Direct link to 1. Migrating Configuration to the Database" title="Direct link to 1. Migrating Configuration to the Database" translate="no">​</a></h3>
<p>The first key change was migrating partition count configuration from dynamic config to the Cadence cluster’s database. This allows the configuration to be updated programmatically.</p>
<ul>
<li>The <strong>adaptive tasklist scaler</strong> runs in the root partition only.</li>
<li>It reads and updates the partition count.</li>
<li>Updates propagate to non-root partitions via a <strong>push model</strong>, and to pollers and producers via a <strong>pull model</strong>.</li>
<li>A <strong>version number</strong> is associated with each config. The version only increments through scaler updates, ensuring monotonicity and consistency across components.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-monitoring-tasklist-traffic">2. Monitoring Tasklist Traffic<a href="#2-monitoring-tasklist-traffic" class="hash-link" aria-label="Direct link to 2. Monitoring Tasklist Traffic" title="Direct link to 2. Monitoring Tasklist Traffic" translate="no">​</a></h3>
<p>The scaler periodically monitors the <strong>write QPS</strong> of each tasklist.</p>
<ul>
<li>If QPS exceeds an upscale threshold for a sustained period, the number of <strong>read and write partitions</strong> is increased proportionally.</li>
<li>If QPS falls below a downscale threshold, only the <strong>write partitions</strong> are reduced initially. The system then waits for drained partitions to clear before reducing the number of <strong>read partitions</strong>, ensuring backlog-free downscaling.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-adaptive-tasklist-scaler">Enabling Adaptive Tasklist Scaler<a href="#enabling-adaptive-tasklist-scaler" class="hash-link" aria-label="Direct link to Enabling Adaptive Tasklist Scaler" title="Direct link to Enabling Adaptive Tasklist Scaler" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h3>
<p>To use this feature, upgrade Cadence to <a href="https://github.com/cadence-workflow/cadence/tree/v1.3.0" target="_blank" rel="noopener noreferrer">v1.3.0 or later</a>.</p>
<p>Also, migrate tasklist partition configurations to the database using <a href="https://github.com/cadence-workflow/cadence/blob/v1.3.0/docs/migration/tasklist-partition-config.md" target="_blank" rel="noopener noreferrer">this guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" translate="no">​</a></h3>
<p>The scaler is governed by the following dynamic configuration parameters:</p>
<ul>
<li><code>matching.enableAdaptiveScaler</code>: Enables the scaler at the tasklist level.</li>
<li><code>matching.partitionUpscaleSustainedDuration</code>: Duration that QPS must stay above threshold before triggering upscale.</li>
<li><code>matching.partitionDownscaleSustainedDuration</code>: Duration below threshold required before triggering downscale.</li>
<li><code>matching.adaptiveScalerUpdateInterval</code>: Frequency at which the scaler evaluates and updates partition counts.</li>
<li><code>matching.partitionUpscaleRPS</code>: QPS threshold per partition that triggers upscale.</li>
<li><code>matching.partitionDownscaleFactor</code>: Factor applied to introduce hysteresis, lowering the QPS threshold for downscaling to avoid oscillations.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-and-metrics">Monitoring and Metrics<a href="#monitoring-and-metrics" class="hash-link" aria-label="Direct link to Monitoring and Metrics" title="Direct link to Monitoring and Metrics" translate="no">​</a></h2>
<p>Several metrics have been introduced to help monitor the scaler’s behavior:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qps-and-thresholds">QPS and Thresholds<a href="#qps-and-thresholds" class="hash-link" aria-label="Direct link to QPS and Thresholds" title="Direct link to QPS and Thresholds" translate="no">​</a></h3>
<ul>
<li><code>estimated_add_task_qps_per_tl</code>: Estimated QPS of task additions per tasklist.</li>
<li><code>tasklist_partition_upscale_threshold</code>: Upscale threshold for task additions.</li>
<li><code>tasklist_partition_downscale_threshold</code>: Downscale threshold for task additions.</li>
</ul>
<blockquote>
<p>The <code>estimated_add_task_qps_per_tl</code> value should remain between the upscale and downscale thresholds. If not, the scaler may not be functioning properly.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="partition-configurations">Partition Configurations<a href="#partition-configurations" class="hash-link" aria-label="Direct link to Partition Configurations" title="Direct link to Partition Configurations" translate="no">​</a></h3>
<ul>
<li><code>task_list_partition_config_num_read</code>: Number of current <strong>read</strong> partitions.</li>
<li><code>task_list_partition_config_num_write</code>: Number of current <strong>write</strong> partitions.</li>
<li><code>task_list_partition_config_version</code>: Version of the current partition configuration.</li>
</ul>
<p>These metrics are emitted by various components: root and non-root partitions, pollers, and producers. Their values should align under normal conditions, except immediately after updates.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="status-at-uber">Status at Uber<a href="#status-at-uber" class="hash-link" aria-label="Direct link to Status at Uber" title="Direct link to Status at Uber" translate="no">​</a></h2>
<p>We enabled adaptive tasklist scaler across all Uber clusters in <strong>March 2025</strong>. Since its deployment:</p>
<ul>
<li><strong>Zero incidents</strong> have been reported due to misconfigured tasklists.</li>
<li><strong>Operational workload</strong> related to manual scaling has been eliminated.</li>
<li><strong>Scalability and resilience</strong> of Matching service have improved significantly.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Cadence Operations tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/cadence-operations">Cadence Operations</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/cadence-matching">cadence-matching</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/zonal-isolation-v1/zonal-isolation-v1">Zonal Isolation for Cadence Workflows</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-14T00:00:00.000Z">October 14, 2024</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/shaddoll"><img class="avatar__photo authorImage_XqGP" src="https://github.com/Shaddoll.png" alt="Zijian Chen"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/shaddoll"><span class="authorName_yefp" translate="no">Zijian Chen</span></a></div><small class="authorTitle_nd0D" title="Software Engineer @ Uber">Software Engineer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/zijian-chen-5868938b/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/Shaddoll" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>At Uber, we want to achieve regional resilience such that losing a zone within a region can be tolerated without requiring a cross-region failover. We also want to make sure that losing a zone only affects a subset of workload, at most, rather than everything. However, in Cadence-based systems, the workload in a region is distributed randomly across all workers in the region at a “task-level granularity”, which means a workflow may be worked on by any worker in the region where the domain is active. To achieve this goal, we introduced Zonal Isolation for Cadence Workflows - a feature designed to pin workflows to the zone they are started in, so that zonal isolation can be achieved at a workflow-level.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-zonal-isolation-for-cadence-workflows">What is Zonal Isolation for Cadence Workflows?<a href="#what-is-zonal-isolation-for-cadence-workflows" class="hash-link" aria-label="Direct link to What is Zonal Isolation for Cadence Workflows?" title="Direct link to What is Zonal Isolation for Cadence Workflows?" translate="no">​</a></h2>
<p>At high-level, Zonal Isolation for Cadence Workflows can be thought in 2 levels:</p>
<ol>
<li><strong>Task-level isolation:</strong> All decision tasks and activity tasks of a workflow are only processed by workers from the zone where the workflow was started</li>
<li><strong>Infrastructure-level isolation:</strong> Within a regional Cadence cluster, workflows are handled by server instances in the same zone where they were started, and the corresponding data is stored in that zone as well.</li>
</ol>
<p>Infrastructure-level isolation is quite challenging to implement as it requires significant changes to the core design of the Cadence server. Due to the complexity involved, support for this feature is not planned for the foreseeable future.</p>
<p>As a result, the focus remains on achieving task-level zonal isolation outside the Cadence server, which offers a more practical and immediate way to improve system resilience. It provides the capability of ensuring that an unhealthy zone (i.e. bad deployment of workers) only affect a subset of workflows (started from a certain zone) rather than every workflow in a Cadence domain.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Cadence Operations tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/cadence-operations">Cadence Operations</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Zonal Isolation for Cadence Workflows" href="/Cadence-Docs/blog/zonal-isolation-v1/zonal-isolation-v1"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2024/09/05/workflow-specific-rate-limits">Minimizing blast radius in Cadence: Introducing Workflow ID-based Rate Limits</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-09-05T00:00:00.000Z">September 5, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/jakobht"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jakobht.png" alt="Jakob Haahr Taankvist"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/jakobht"><span class="authorName_yefp" translate="no">Jakob Haahr Taankvist</span></a></div><small class="authorTitle_nd0D" title="Senior Software Engineer @ Uber">Senior Software Engineer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/jakob-taankvist/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/jakobht" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>At Uber, we run several big multitenant Cadence clusters with hundreds of domains in each. The clusters being multi-tenant means potential <a href="https://en.wikipedia.org/wiki/Cloud_computing_issues#Performance_interference_and_noisy_neighbors" target="_blank" rel="noopener noreferrer">noisy neighbor</a> effects between domains.</p>
<p>An essential aspect of avoiding this is managing how workflows interact with our infrastructure to prevent any single workflow from causing instability for the whole cluster. To this end, we are excited to introduce Workflow ID-based rate limits — a new feature designed to protect our clusters from problematic workflows and ensure stability across the board.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-workflow-id-based-rate-limits">Why Workflow ID-based Rate Limits?<a href="#why-workflow-id-based-rate-limits" class="hash-link" aria-label="Direct link to Why Workflow ID-based Rate Limits?" title="Direct link to Why Workflow ID-based Rate Limits?" translate="no">​</a></h2>
<p>We already have rate limits for how many requests can be sent to a domain. However, since Cadence is sharded on the workflow ID, a user-provided input, an overused workflow with a particular id might overwhelm a shard by making too many requests. There are two main ways this happens:</p>
<ol>
<li>A user starts, or signals the same workflow ID too aggressively,</li>
<li>A workflow starts too many activities over a short period of time (e.g. thousands of activities in seconds).</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Minimizing blast radius in Cadence: Introducing Workflow ID-based Rate Limits" href="/Cadence-Docs/blog/2024/09/05/workflow-specific-rate-limits"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2024/07/11/2024-07-11-yearly-roadmap-update/yearly-roadmap-update">2024 Cadence Yearly Roadmap Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-11T00:00:00.000Z">July 11, 2024</time> · <!-- -->17 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/enderdemirkaya"><img class="avatar__photo authorImage_XqGP" src="https://github.com/demirkayaender.png" alt="Ender Demirkaya"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/enderdemirkaya"><span class="authorName_yefp" translate="no">Ender Demirkaya</span></a></div><small class="authorTitle_nd0D" title="Senior Manager at Uber, Cadence. Author of the Software Engineering Handbook">Senior Manager at Uber, Cadence. Author of the Software Engineering Handbook</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/enderdemirkaya/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/demirkayaender" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<p>If you haven’t heard about Cadence, this section is for you. In a short description, Cadence is a code-driven workflow orchestration engine. The definition itself may not tell enough, so it would help splitting it into three parts:</p>
<ul>
<li>What’s a workflow? (everyone has a different definition)</li>
<li>Why does it matter to be code-driven?</li>
<li>Benefits of Cadence</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-workflow">What is a Workflow?<a href="#what-is-a-workflow" class="hash-link" aria-label="Direct link to What is a Workflow?" title="Direct link to What is a Workflow?" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="workflow.png" src="/Cadence-Docs/assets/images/workflow-84ef76d93c7ff138714a0aa7c9b92841.png" width="650" height="394" class="img_ev3q"></p>
<p>In the simplest definition, it is “a multi-step execution”. Step here represents individual operations that are a little heavier than small in-process function calls. Although they are not limited to those: it could be a separate service call, processing a large dataset, map-reduce, thread sleep, scheduling next run, waiting for an external input, starting a sub workflow etc. It’s anything a user thinks as a single unit of logic in their code. Those steps often have dependencies among themselves. Some steps, including the very first step, might require external triggers (e.g. button click) or schedules. In the more broader meaning, any multi-step function or service is a workflow in principle.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Roadmap tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/roadmap">Roadmap</a></li><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 2024 Cadence Yearly Roadmap Update" href="/Cadence-Docs/blog/2024/07/11/2024-07-11-yearly-roadmap-update/yearly-roadmap-update"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2024/02/15/cadence-non-deterministic-common-qa">Cadence non-derministic errors common question Q&amp;A (part 1)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-10T00:00:00.000Z">March 10, 2024</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/chopincode"><img class="avatar__photo authorImage_XqGP" src="https://github.com/chopincode.png" alt="Chris Qin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/chopincode"><span class="authorName_yefp" translate="no">Chris Qin</span></a></div><small class="authorTitle_nd0D" title="Applications Developer @ Uber">Applications Developer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/chrisqin0610/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/chopincode" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="if-i-change-code-logic-inside-an-cadence-activity-for-example-my-activity-is-calling-database-a-but-now-i-want-it-to-call-database-b--will-it-trigger-an-non-deterministic-error">If I change code logic inside an Cadence activity (for example, my activity is calling database A but now I want it to call database B),  will it trigger an non-deterministic error?<a href="#if-i-change-code-logic-inside-an-cadence-activity-for-example-my-activity-is-calling-database-a-but-now-i-want-it-to-call-database-b--will-it-trigger-an-non-deterministic-error" class="hash-link" aria-label="Direct link to If I change code logic inside an Cadence activity (for example, my activity is calling database A but now I want it to call database B),  will it trigger an non-deterministic error?" title="Direct link to If I change code logic inside an Cadence activity (for example, my activity is calling database A but now I want it to call database B),  will it trigger an non-deterministic error?" translate="no">​</a></h3>
<p><b>NO</b>. This change will not trigger non-deterministic error.</p>
<p>An Activity is the smallest unit of execution for Cadence and what happens inside activities are not recorded as historical events and therefore will not be replayed. In short, this change is deterministic and it is fine to modify logic inside activities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="does-changing-the-workflow-definition-trigger-non-determinstic-errors">Does changing the workflow definition trigger non-determinstic errors?<a href="#does-changing-the-workflow-definition-trigger-non-determinstic-errors" class="hash-link" aria-label="Direct link to Does changing the workflow definition trigger non-determinstic errors?" title="Direct link to Does changing the workflow definition trigger non-determinstic errors?" translate="no">​</a></h3>
<p><b>YES</b>. This is a very typical non-deterministic error.</p>
<p>When a new workflow code change is deployed, Cadence will find if it is compatible with
Cadence history. Changes to workflow definition will fail the replay process of Cadence
as it finds the new workflow definition imcompatible with previous historical events.</p>
<p>Here is a list of common workflow definition changes.</p>
<ul>
<li>Changing workflow parameter counts</li>
<li>Changing workflow parameter types</li>
<li>Changing workflow return types</li>
</ul>
<p>The following changes are not categorized as definition changes and therefore will not
trigger non-deterministic errors.</p>
<ul>
<li>Changes of workflow return values</li>
<li>Changing workflow parameter names as they are just positional</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Cadence non-derministic errors common question Q&amp;A (part 1)" href="/Cadence-Docs/blog/2024/02/15/cadence-non-deterministic-common-qa"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2023/08/28/nondeterministic-errors-replayers-shadowers">Non-deterministic errors, replayers and shadowers</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-27T00:00:00.000Z">August 27, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/chopincode"><img class="avatar__photo authorImage_XqGP" src="https://github.com/chopincode.png" alt="Chris Qin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/chopincode"><span class="authorName_yefp" translate="no">Chris Qin</span></a></div><small class="authorTitle_nd0D" title="Applications Developer @ Uber">Applications Developer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/chrisqin0610/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/chopincode" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>It is conceivable that developers constantly update their Cadence workflow code based upon new business use cases and needs. However,
the definition of a Cadence workflow must be deterministic because behind the scenes cadence uses event sourcing to construct
the workflow state by replaying the historical events stored for this specific workflow. Introducing components that are not compatible
with an existing running workflow will yield to non-deterministic errors and sometimes developers find it tricky to debug. Consider the
following workflow that executes two activities.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SampleWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ao </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ActivityOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ScheduleToStartTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Minute</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StartToCloseTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Minute</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithActivityOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ao</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> result1 </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ActivityA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">result1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> result2 </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ActivityB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">result2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> result2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Testing tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/testing">Testing</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Non-deterministic errors, replayers and shadowers" href="/Cadence-Docs/blog/2023/08/28/nondeterministic-errors-replayers-shadowers"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2023/07/16/2023-07-16-write-your-first-workflow-with-cadence/write-your-first-workflow-with-cadence">Write your first workflow with Cadence</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-16T00:00:00.000Z">July 16, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/chopincode"><img class="avatar__photo authorImage_XqGP" src="https://github.com/chopincode.png" alt="Chris Qin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/chopincode"><span class="authorName_yefp" translate="no">Chris Qin</span></a></div><small class="authorTitle_nd0D" title="Applications Developer @ Uber">Applications Developer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/chrisqin0610/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/chopincode" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>We have covered <a href="/Cadence-Docs/blog/2023/06/28/components-of-cadence-application-setup">basic components of Cadence</a> and <a href="/Cadence-Docs/blog/2023/07/05/implement-cadence-worker-from-scratch">how to implement a Cadence worker on local environment</a> in previous blogs. In this blog, let&#x27;s write your very first HelloWorld workflow with Cadence. I&#x27;ve started the Cadence backend server in background and registered a domain named <code>test-domain</code>. You may use the code snippet for the worker service in <a href="/Cadence-Docs/blog/2023/07/05/implement-cadence-worker-from-scratch">this blog</a>  Let&#x27;s first write a activity, which takes a single string argument and print a log in the console.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">helloWorldActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	logger </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> activity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;helloworld activity started&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Introduction to Cadence tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/introduction-to-cadence">Introduction to Cadence</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Write your first workflow with Cadence" href="/Cadence-Docs/blog/2023/07/16/2023-07-16-write-your-first-workflow-with-cadence/write-your-first-workflow-with-cadence"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2023/07/10/cadence-bad-practices-part-1">Bad practices and Anti-patterns with Cadence (Part 1)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-10T00:00:00.000Z">July 10, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/chopincode"><img class="avatar__photo authorImage_XqGP" src="https://github.com/chopincode.png" alt="Chris Qin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/chopincode"><span class="authorName_yefp" translate="no">Chris Qin</span></a></div><small class="authorTitle_nd0D" title="Applications Developer @ Uber">Applications Developer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/chrisqin0610/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/chopincode" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>In the upcoming blog series, we will delve into a discussion about common bad practices and anti-patterns related to Cadence. As diverse teams often encounter distinct business use cases, it becomes imperative to address the most frequently reported issues in Cadence workflows. To provide valuable insights and guidance, the Cadence team has meticulously compiled these common challenges based on customer feedback.</p>
<ul>
<li>Reusing the same workflow ID for very active/continuous running workflows</li>
</ul>
<p>Cadence organizes workflows based on their unique IDs, using a process called <b>partitioning</b>. If a workflow receives a large number of updates in a short period of time or frequently starts new runs using the <code>continueAsNew</code> function, all these updates will be directed to the same shard. Unfortunately, the Cadence backend is not equipped to handle this concentrated workload efficiently. As a result, a situation known as a &quot;hot shard&quot; arises, overloading the Cadence backend and worsening the problem.</p>
<p>Solution:
Well, the best way to avoid this is simply just design your workflow in the way such that each workflow owns a uniformly distributed workflow ID across your Cadence domain. This will make sure that Cadence backend is able to evenly distribute the traffic with proper partition on your workflowIDs.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Introduction to Cadence tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/introduction-to-cadence">Introduction to Cadence</a></li><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Bad practices and Anti-patterns with Cadence (Part 1)" href="/Cadence-Docs/blog/2023/07/10/cadence-bad-practices-part-1"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/Cadence-Docs/blog/2023/07/05/implement-cadence-worker-from-scratch">Implement a Cadence worker service from scratch</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-05T00:00:00.000Z">July 5, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/Cadence-Docs/blog/authors/chopincode"><img class="avatar__photo authorImage_XqGP" src="https://github.com/chopincode.png" alt="Chris Qin"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/Cadence-Docs/blog/authors/chopincode"><span class="authorName_yefp" translate="no">Chris Qin</span></a></div><small class="authorTitle_nd0D" title="Applications Developer @ Uber">Applications Developer @ Uber</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/chrisqin0610/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/chopincode" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>In the previous <a href="/Cadence-Docs/blog/2023/06/28/components-of-cadence-application-setup">blog</a>, we have introduced three critical components for a Cadence application: the Cadence backend, domain, and worker. Among these, the worker service is the most crucial focus for developers as it hosts the activities and workflows of a Cadence application. In this blog, I will provide a short tutorial on how to implement a simple worker service from scratch in Go.</p>
<p>To finish this tutorial, there are two prerequisites you need to finish first</p>
<ol>
<li>Register a Cadence domain for your worker. For this tutorial, I&#x27;ve already registered a domain named <code>test-domain</code></li>
<li>Start the Cadence backend server in background.</li>
</ol>
<p>To get started, let&#x27;s simply use the native HTTP package built in Go to start a process listening to port 3000. You may customize the port for your worker, but the port you choose should not conflict with existing port for your Cadence backend.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;net/http&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Cadence worker started at port 3000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ListenAndServe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;:3000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" title="Deep Dives tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/deep-dives">Deep Dives</a></li><li class="tag_QGVx"><a rel="tag" title="Introduction to Cadence tag description" class="tag_zVej tagRegular_sFm0" href="/Cadence-Docs/blog/tags/introduction-to-cadence">Introduction to Cadence</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Implement a Cadence worker service from scratch" href="/Cadence-Docs/blog/2023/07/05/implement-cadence-worker-from-scratch"><b>Read more</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/Cadence-Docs/blog/tags/deep-dives/page/2"><div class="pagination-nav__label">Older entries</div></a></nav></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/get-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/go-client">Go Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/java-client">Java Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/cli">Command Line Interface</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/operation-guide">Operation Guide</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/cadence-workflow+uber-cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://communityinviter.com/apps/cloud-native/cncf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Community on CNCF Slack<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/cadenceworkflow/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © Cadence a Series of LF Projects, LLC. <br>For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org/policies/" target="_blank">lfprojects.org/policies/</a>.</div></div></div></footer></div>
</body>
</html>