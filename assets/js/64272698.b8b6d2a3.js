"use strict";(self.webpackChunkcadence=self.webpackChunkcadence||[]).push([[2131],{85314:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"go-client/sleep","title":"Sleep","description":"The workflow.Sleep function allows a Cadence workflow to pause its execution for a specified duration. This is similar to time.Sleep in Go, but is safe and deterministic for use within Cadence workflows. The workflow will be paused and resumed by the Cadence service, and the sleep is durable\u2014meaning the workflow can survive worker restarts or failures during the sleep period.","source":"@site/docs/05-go-client/21-sleep.md","sourceDirName":"05-go-client","slug":"/go-client/sleep","permalink":"/Cadence-Docs/docs/go-client/sleep","draft":false,"unlisted":false,"editUrl":"https://github.com/cadence-workflow/Cadence-Docs/tree/master/docs/05-go-client/21-sleep.md","tags":[],"version":"current","lastUpdatedBy":"Vishwa Patil","lastUpdatedAt":1754330175000,"sidebarPosition":21,"frontMatter":{"layout":"default","title":"Sleep","permalink":"/docs/go-client/sleep"},"sidebar":"docsSidebar","previous":{"title":"Workflow Non-deterministic errors","permalink":"/Cadence-Docs/docs/go-client/workflow-non-deterministic-error"},"next":{"title":"Introduction","permalink":"/Cadence-Docs/docs/cli/"}}');var i=o(74848),s=o(28453);const t={layout:"default",title:"Sleep",permalink:"/docs/go-client/sleep"},l="Workflow Sleep",c={},d=[{value:"Example: Sleep for 30 Seconds",id:"example-sleep-for-30-seconds",level:2},{value:"Key Points",id:"key-points",level:3},{value:"When to Use",id:"when-to-use",level:3},{value:"Limitations",id:"limitations",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"workflow-sleep",children:"Workflow Sleep"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"workflow.Sleep"})," function allows a Cadence workflow to pause its execution for a specified duration. This is similar to ",(0,i.jsx)(n.code,{children:"time.Sleep"})," in Go, but is safe and deterministic for use within Cadence workflows. The workflow will be paused and resumed by the Cadence service, and the sleep is durable\u2014meaning the workflow can survive worker restarts or failures during the sleep period."]}),"\n",(0,i.jsx)(n.h2,{id:"example-sleep-for-30-seconds",children:"Example: Sleep for 30 Seconds"}),"\n",(0,i.jsxs)(n.p,{children:["Here is a minimal example of using ",(0,i.jsx)(n.code,{children:"workflow.Sleep"})," in a Cadence workflow, as demonstrated in ",(0,i.jsx)(n.a,{href:"https://github.com/cadence-workflow/cadence-samples/pull/99",children:"cadence-samples PR #99"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import (\n    "time"\n    "go.uber.org/cadence/workflow"\n)\n\nfunc SleepWorkflow(ctx workflow.Context) error {\n    workflow.GetLogger(ctx).Info("Workflow started, going to sleep for 30 seconds...")\n    err := workflow.Sleep(ctx, 30*time.Second)\n    if err != nil {\n        workflow.GetLogger(ctx).Error("Sleep interrupted", "Error", err)\n        return err\n    }\n    workflow.GetLogger(ctx).Info("Woke up after 30 seconds!")\n    return nil\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"key-points",children:"Key Points"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"workflow.Sleep(ctx, duration)"})," instead of ",(0,i.jsx)(n.code,{children:"time.Sleep"})," inside workflow code."]}),"\n",(0,i.jsx)(n.li,{children:"The sleep is durable: if the worker crashes or restarts, the workflow will resume sleeping where it left off."}),"\n",(0,i.jsx)(n.li,{children:"The workflow is not consuming worker resources while sleeping; the state is persisted by Cadence."}),"\n",(0,i.jsxs)(n.li,{children:["You can use any duration supported by Go's ",(0,i.jsx)(n.code,{children:"time.Duration"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Delaying workflow progress for a fixed period (e.g., retry with backoff, scheduled reminders, timeouts)."}),"\n",(0,i.jsx)(n.li,{children:"Waiting for an external event or timeout before proceeding."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Do not use ",(0,i.jsx)(n.code,{children:"time.Sleep"})," in workflow code; always use ",(0,i.jsx)(n.code,{children:"workflow.Sleep"})," for determinism and durability."]}),"\n",(0,i.jsx)(n.li,{children:"Very large numbers of simultaneous timers (sleeps) may impact cluster performance; consider jittering or batching if needed."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For more details and advanced usage, see the ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/go.uber.org/cadence/workflow#Sleep",children:"Cadence Go client documentation"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>l});var r=o(96540);const i={},s=r.createContext(i);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);